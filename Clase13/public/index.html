<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Document</title>

</head>

<body>

    <h1>hola</h1>

    <div id="response"></div>

    <form id="formulario">
        <label> Nombre de usuario </label>
        <br>
        <input placeholder=" ingrese un mensaje" name="username" />
        <br>
        <label >Contrase√±a</label>
        <br>
        <input placeholder="pepe123" name = "password">
        <button type="submit">Enviar</button>
    </form>



    <script>
        const direccion = 'http://localhost:8080/'


        const formularioHTML = document.getElementById("formulario")
        formularioHTML.addEventListener("submit", async (e) => {
            e.preventDefault()

            const data = { username: formularioHTML.username.value, password: formularioHTML.password.value }

            const respuesta = await fetch(direccion, { //ruta a la cual mandar
                method: "POST",                        //metodo a usar 
                body: new URLSearchParams(data).toString(), //Contenido a mandar
                headers: { "Content-Type": "application/x-www-form-urlencoded" } // nota que describe el body
            }).then(res => res.json())

            console.log(respuesta)

            if (respues.ok){
                window.location.href= "./home.html"
            }else{
                alert("Usuario inexistente")
            }

        })



        const responseHTML = document.getElementById("response")

        const callApi = async () => {

            let response = await fetch('http://localhost:8080/', { method: 'GET' }).then(res => res.json())
            console.log(response)
            responseHTML.innerHTML = response.mensaje

        }

        callApi()

    </script>

</body>

</html>